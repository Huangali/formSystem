<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Tag标签管理</title>
<link rel="stylesheet" href="/statics/layui/css/layui.css"></link>
<link rel="stylesheet" href="/statics/css/css.css"></link>
</head>
<body>


	<div style="padding: 20px">
	        <span class="layui-breadcrumb">
			  <a>首页</a>
			  <a><cite>Tag标签管理</cite></a>
			</span>
		    <div style="padding-top: 20px;">
		    	<div>
			    	<div>
			          <button class="layui-btn layuiadmin-btn-list" data-type="batchdel" onclick="addTag()">添加</button>
			    	</div>
			    </div>
			    <div>
				    <table width="100%" id="tagListTable" ></table>
			    </div>
			</div>
	  </div>

<script src="/statics/layui/layui.js"></script>
	<script src="/statics/js/jquery.js"></script>
	<script src="/statics/js/common.js"></script>
<script type="text/javascript">

	layui.use(['element','form','table'], function(){
	    var form=layui.form;
		  var element = layui.element; //导航的hover效果、二级菜单等功能，需要依赖element模块
		  $ = layui.jquery; // 使用jquery
		  table = layui.table;

		  table.render({
		    elem: '#tagListTable'
		    ,url:'/templateData/list?t'
		    ,cols: [[
			  {type:'checkbox'}
              ,{field:'_id', width:100,title: '编号'}
		      ,{field:'age', title: 'Tag标签名称'}
		      ,{field:'name', width:100, title: '排列序号',align:'center'}
			  ,{field:'_class', width:250, title: '操作',align:'center',templet:formatAction}
		    ]]
		    ,page: true
		  });


	});


	function deleteOne(id){
		layer.confirm('您确定要删除这条记录吗？', {
	    title:"系统提示"
		  ,btn: ['确定','取消'] //按钮
		}, function(){
			layer.closeAll('dialog');
			$.post("/admin/tag/delete",{"id":id},function(result){
				if(result.success){
					layer.msg("删除成功！");
					table.reload("tagListTable",{});
				}else{
					layer.msg("删除失败，请联系管理员！");
				}
			},"json");
		}, function(){

		});
	}

	function addTag(){
		// layer.open({
		// 	  type: 2,
		// 	  title: '添加Tag标签',
		// 	  area: ['500px', '500px'],
		// 	  content: '/admin/saveTemplate.html' //iframe的url
		// 	});
		layer.confirm('您确定要删除这条记录吗？', {
			title:"系统提示"
			,btn: ['确定','取消'] //按钮
		}, function(){
			layer.closeAll('dialog');
			$.post("/templateData/list",{limit:5,page: 1,templateName: 'test'},function(result){
				if(result.success){
					layer.msg("删除成功！");
					console.log(result.data);
					// table.reload("tagListTable",{});
				}else{
					layer.msg("删除失败，请联系管理员！");
				}
			},"json");
		}, function(){

		});
	}

	function modifyTag(id){
		layer.open({
			  type: 2,
			  title: '修改Tag标签',
			  area: ['500px', '500px'],
			  content: '/admin/saveTag.html?id='+id //iframe的url
			});
	}


	function formatAction(d){
		return "<button class='layui-btn layui-btn-normal layui-btn-xs' onclick='modifyTag("+d.id+")'><i class='layui-icon layui-icon-edit'></i>编辑</button><button class='layui-btn layui-btn-warm layui-btn-xs' onclick='deleteOne("+d.id+")'><i class='layui-icon layui-icon-delete' ></i>删除</button>";
	}



</script>
</body>
</html>
